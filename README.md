# ServiceCRM — вспомогательные инструменты

## Конструктор формул

В репозитории добавлен самостоятельный модуль `formula_builder.php`, который позволяет:

* читать данные из любой таблицы базы данных через визуальный интерфейс;
* настраивать агрегирующие формулы (SUM, AVG, MIN, MAX, COUNT) с фильтрами по выбранному столбцу;
* умножать результат на заданный коэффициент и сохранять вычисленное значение в таблицу `calculated_metrics`;
* просматривать историю сохранённых расчётов для контроля показателей сервисного центра.

### Как воспользоваться

1. Откройте страницу `/formula_builder.php` в браузере.
2. Выберите исходную таблицу, поле и тип агрегации.
3. При необходимости задайте условия отбора и множитель.
4. Используйте кнопку «Предпросмотр», чтобы проверить итог до сохранения.
5. Нажмите «Рассчитать и сохранить» — результат будет записан в таблицу `calculated_metrics`.

> Таблица `calculated_metrics` создаётся автоматически при первом сохранении результата. Её можно использовать в отчётах и дашбордах для анализа работы сервисного центра.